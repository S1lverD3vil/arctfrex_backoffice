import { UseQueryOptions, useQuery } from "@tanstack/react-query";
import axios from "@/libs/axios";

const ENDPOINT = "/backoffice/deposit/credit/spa";

// Generated by https://quicktype.io
export interface DepositCreditSpaResponse {
  message: string;
  data: Deposit[];
  pagination: Pagination;
  time: string;
}

export interface Deposit {
  deposit_id: string;
  account_id: string;
  user_id: string;
  name: string;
  email: string;
  amount: number;
  amount_usd: number;
  approval_status: number | string;
  created_at: Date;
  bank_name: string;
  meta_login_id: number;
  deposit_type: number;
  finance_by: string;
}

export interface Pagination {
  sorter: string;
  total: number;
  page_size: number;
  current_page: number;
}

type Options = Partial<UseQueryOptions<DepositCreditSpaResponse, Error>> &
  Partial<Pagination> & {
    menutype?: string;
  };

// https://arctfrex.apidog.io/api-16495989
export const useDepositCreditSpaQuery = ({
  menutype,
  current_page,
  page_size,
  ...options
}: Options) => {
  return useQuery({
    queryKey: [ENDPOINT, menutype, current_page, page_size],
    queryFn: async () => {
      const { data } = await axios.get<DepositCreditSpaResponse>(
        ENDPOINT + "/" + menutype,
        {
          params: {
            current_page,
            page_size,
          },
        }
      );

      return data;
    },
    ...options,
  });
};
