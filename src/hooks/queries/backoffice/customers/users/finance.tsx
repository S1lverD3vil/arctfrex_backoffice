import {
  UseMutationOptions,
  UseQueryOptions,
  useMutation,
  useQuery,
} from "@tanstack/react-query";
import axios from "@/libs/axios";

const ENDPOINT = "/backoffice/customers/users/finance";

// Generated by https://quicktype.io
export interface CustomersUsersFinanceResponse {
  message: string;
  data: Finance;
  time: string;
}

export interface Finance {
  user_id: string;
  source_income: string;
  yearly_income_amount: string;
  yearly_additional_income_amount: string;
  estimation_wealth_amount: string;
  taxable_object_sales_value: string;
  deposito: string;
  currency: string;
  bank_name: string;
  bank_branch: string;
  bank_city: string;
  bank_account_number: string;
  bank_beneficiary_name: string;
  bank_account_type: string;
  bank_phone: string;
  investment_goals: string;
  investment_experience: string;
  bank_list: BankList[];
  currency_rate: number;
  product_service_platform: string;
  dom_address: string;
  identity_address: string;
}

export interface BankList {
  bank_city: string;
  bank_name: string;
  bank_branch: string;
  bank_account_type: string;
  bank_account_number: string;
  bank_beneficiary_name: string;
}

type Options = Partial<
  UseQueryOptions<CustomersUsersFinanceResponse, Error>
> & {
  userId?: string;
};

// https://arctfrex.apidog.io/api-10313431
export const useCustomersUsersFinance = ({ userId, ...options }: Options) => {
  return useQuery({
    ...options,
    queryKey: ["customers-users-finance", userId],
    queryFn: async () => {
      const { data } = await axios.get<CustomersUsersFinanceResponse>(
        ENDPOINT + "/" + userId
      );

      return data;
    },
  });
};

export const useCustomersUsersFinanceMutation = ({
  userId,
  ...options
}: UseMutationOptions<any, Error, any> & { userId: string }) => {
  return useMutation({
    mutationFn: async (payload) => {
      const { data } = await axios.post<any>(ENDPOINT + "/" + userId, payload);

      return data;
    },
    ...options,
  });
};
